import{g as O}from"./index-ByGFeRIJ.js";import{u as B}from"./index-BHoJcF0t.js";import{i as D}from"./echarts-Bb6yjXMn.js";import{v as N,c as T,r as M,l as W,j as E,B as I,y as K,K as P,C as o,u as f,D as e,ak as n,n as V,E as s,O as l,z as v}from"./vue-Oyw5Wt-7.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./elementPlus-BZK7s8Hm.js";const H={class:"dashboard"},L={class:"stat-icon",style:{"background-color":"#409eff"}},A={class:"stat-info"},F={class:"stat-value"},U={class:"stat-icon",style:{"background-color":"#67c23a"}},$={class:"stat-info"},q={class:"stat-value"},G={class:"stat-icon",style:{"background-color":"#e6a23c"}},J={class:"stat-info"},Q={class:"stat-value"},X={class:"stat-icon",style:{"background-color":"#f56c6c"}},Y={class:"stat-info"},Z={class:"stat-value"},ss={class:"stat-icon",style:{"background-color":"#ff9800"}},ts={class:"stat-info"},os={class:"stat-value"},es={class:"stat-icon",style:{"background-color":"#9c27b0"}},as={class:"stat-info"},ns={class:"stat-value"},ls={class:"stat-icon",style:{"background-color":"#00bcd4"}},cs={class:"stat-info"},ds={class:"stat-value"},rs={class:"room-status-list"},is={class:"status-item"},us={class:"status-count"},_s={class:"status-item"},ms={class:"status-count"},ps={class:"status-item"},fs={class:"status-count"},vs={class:"status-item"},hs={class:"status-count"},bs={class:"status-item"},ys={class:"status-count"},gs=N({__name:"index",setup(Rs){const u=B(),h=T(()=>u.roleType===9),_=M(),a=W({todayOrders:0,checkedInPets:0,freeRooms:0,reservedRooms:0,occupiedRooms:0,cleaningRooms:0,maintenanceRooms:0,totalRooms:0,todayRevenue:0,monthRevenue:0,totalRevenue:0}),m=c=>!c&&c!==0?"0.00":Number(c).toFixed(2),b=async()=>{try{const c=await O();Object.assign(a,c.data),await V(),y()}catch(c){console.error("获取仪表盘数据失败:",c)}},y=()=>{if(!_.value)return;const c=D(_.value),t={tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},legend:{orient:"vertical",right:"10%",top:"center"},series:[{name:"房间状态",type:"pie",radius:["40%","70%"],center:["40%","50%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1},emphasis:{label:{show:!0,fontSize:16,fontWeight:"bold"}},data:[{value:a.freeRooms,name:"空闲",itemStyle:{color:"#67c23a"}},{value:a.reservedRooms,name:"已预订",itemStyle:{color:"#409eff"}},{value:a.occupiedRooms,name:"入住中",itemStyle:{color:"#e6a23c"}},{value:a.cleaningRooms,name:"待清洁",itemStyle:{color:"#909399"}},{value:a.maintenanceRooms,name:"维修中",itemStyle:{color:"#f56c6c"}}]}]};c.setOption(t),window.addEventListener("resize",()=>{c.resize()})};return E(()=>{b()}),(c,t)=>{const g=n("el-alert"),R=n("Tickets"),i=n("el-icon"),d=n("el-card"),r=n("el-col"),k=n("House"),w=n("Key"),z=n("OfficeBuilding"),p=n("el-row"),C=n("Money"),S=n("TrendCharts"),x=n("Wallet");return v(),I("div",H,[!h.value&&f(u).hotelName?(v(),K(g,{key:0,title:`当前查看: ${f(u).hotelName}`,type:"info",closable:!1,"show-icon":"",style:{"margin-bottom":"20px"}},null,8,["title"])):P("",!0),o(p,{gutter:20,class:"stat-cards"},{default:e(()=>[o(r,{span:6},{default:e(()=>[o(d,{shadow:"hover",class:"stat-card"},{default:e(()=>[s("div",L,[o(i,{size:28},{default:e(()=>[o(R)]),_:1})]),s("div",A,[s("p",F,l(a.todayOrders),1),t[0]||(t[0]=s("p",{class:"stat-label"},"今日预订",-1))])]),_:1})]),_:1}),o(r,{span:6},{default:e(()=>[o(d,{shadow:"hover",class:"stat-card"},{default:e(()=>[s("div",U,[o(i,{size:28},{default:e(()=>[o(k)]),_:1})]),s("div",$,[s("p",q,l(a.checkedInPets),1),t[1]||(t[1]=s("p",{class:"stat-label"},"在住宠物",-1))])]),_:1})]),_:1}),o(r,{span:6},{default:e(()=>[o(d,{shadow:"hover",class:"stat-card"},{default:e(()=>[s("div",G,[o(i,{size:28},{default:e(()=>[o(w)]),_:1})]),s("div",J,[s("p",Q,l(a.freeRooms),1),t[2]||(t[2]=s("p",{class:"stat-label"},"空闲房间",-1))])]),_:1})]),_:1}),o(r,{span:6},{default:e(()=>[o(d,{shadow:"hover",class:"stat-card"},{default:e(()=>[s("div",X,[o(i,{size:28},{default:e(()=>[o(z)]),_:1})]),s("div",Y,[s("p",Z,l(a.totalRooms),1),t[3]||(t[3]=s("p",{class:"stat-label"},"总房间数",-1))])]),_:1})]),_:1})]),_:1}),o(p,{gutter:20,class:"stat-cards"},{default:e(()=>[o(r,{span:8},{default:e(()=>[o(d,{shadow:"hover",class:"stat-card revenue-card"},{default:e(()=>[s("div",ss,[o(i,{size:28},{default:e(()=>[o(C)]),_:1})]),s("div",ts,[s("p",os,"¥"+l(m(a.todayRevenue)),1),t[4]||(t[4]=s("p",{class:"stat-label"},"今日收入",-1))])]),_:1})]),_:1}),o(r,{span:8},{default:e(()=>[o(d,{shadow:"hover",class:"stat-card revenue-card"},{default:e(()=>[s("div",es,[o(i,{size:28},{default:e(()=>[o(S)]),_:1})]),s("div",as,[s("p",ns,"¥"+l(m(a.monthRevenue)),1),t[5]||(t[5]=s("p",{class:"stat-label"},"本月收入",-1))])]),_:1})]),_:1}),o(r,{span:8},{default:e(()=>[o(d,{shadow:"hover",class:"stat-card revenue-card"},{default:e(()=>[s("div",ls,[o(i,{size:28},{default:e(()=>[o(x)]),_:1})]),s("div",cs,[s("p",ds,"¥"+l(m(a.totalRevenue)),1),t[6]||(t[6]=s("p",{class:"stat-label"},"总收入",-1))])]),_:1})]),_:1})]),_:1}),o(p,{gutter:20,class:"chart-row"},{default:e(()=>[o(r,{span:12},{default:e(()=>[o(d,{shadow:"hover"},{header:e(()=>[...t[7]||(t[7]=[s("span",null,"房间状态分布",-1)])]),default:e(()=>[s("div",{ref_key:"pieChartRef",ref:_,class:"chart-container"},null,512)]),_:1})]),_:1}),o(r,{span:12},{default:e(()=>[o(d,{shadow:"hover"},{header:e(()=>[...t[8]||(t[8]=[s("span",null,"房态概览",-1)])]),default:e(()=>[s("div",rs,[s("div",is,[t[9]||(t[9]=s("span",{class:"status-dot",style:{"background-color":"#67c23a"}},null,-1)),t[10]||(t[10]=s("span",{class:"status-name"},"空闲",-1)),s("span",us,l(a.freeRooms),1)]),s("div",_s,[t[11]||(t[11]=s("span",{class:"status-dot",style:{"background-color":"#409eff"}},null,-1)),t[12]||(t[12]=s("span",{class:"status-name"},"已预订",-1)),s("span",ms,l(a.reservedRooms),1)]),s("div",ps,[t[13]||(t[13]=s("span",{class:"status-dot",style:{"background-color":"#e6a23c"}},null,-1)),t[14]||(t[14]=s("span",{class:"status-name"},"入住中",-1)),s("span",fs,l(a.occupiedRooms),1)]),s("div",vs,[t[15]||(t[15]=s("span",{class:"status-dot",style:{"background-color":"#909399"}},null,-1)),t[16]||(t[16]=s("span",{class:"status-name"},"待清洁",-1)),s("span",hs,l(a.cleaningRooms),1)]),s("div",bs,[t[17]||(t[17]=s("span",{class:"status-dot",style:{"background-color":"#f56c6c"}},null,-1)),t[18]||(t[18]=s("span",{class:"status-name"},"维修中",-1)),s("span",ys,l(a.maintenanceRooms),1)])])]),_:1})]),_:1})]),_:1})])}}}),Os=j(gs,[["__scopeId","data-v-7196826b"]]);export{Os as default};
