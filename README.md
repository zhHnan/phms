# å® ç‰©é…’åº—ç®¡ç†ç³»ç»Ÿ (Pet Hotel Management System - PHMS)

## é¡¹ç›®ç®€ä»‹
å® ç‰©é…’åº—ç®¡ç†ç³»ç»Ÿæ˜¯ä¸€ä¸ªå®Œæ•´çš„å…¨æ ˆæ¯•ä¸šè®¾è®¡é¡¹ç›®ï¼ŒåŒ…å«å®¢æˆ·ç«¯Cç«¯åº”ç”¨ã€ç®¡ç†åå°Bç«¯åº”ç”¨ä»¥åŠåç«¯APIæœåŠ¡ï¼Œæ”¯æŒDockerä¸€é”®éƒ¨ç½²ã€‚ç³»ç»Ÿæ”¯æŒå¤šé—¨åº—ç®¡ç†ã€å¤šè§’è‰²æƒé™æ§åˆ¶ã€å® ç‰©å¯„å…»é¢„è®¢ç­‰åŠŸèƒ½ã€‚

## æŠ€æœ¯æ ˆ

### åç«¯
- **Spring Boot 3.2.0** - ä¸»æ¡†æ¶
- **MyBatis-Plus 3.5.5** - ORMæ¡†æ¶ï¼Œæ”¯æŒå¤šç§Ÿæˆ·
- **Sa-Token 1.38.0** - è®¤è¯æˆæƒæ¡†æ¶
- **Hutool 5.8.24** - å·¥å…·ç±»åº“
- **Knife4j 4.4.0** - APIæ–‡æ¡£
- **MySQL 8.0** - æ•°æ®åº“
- **Redis 7.0** - ç¼“å­˜/Sessionå­˜å‚¨

### ç®¡ç†ç«¯å‰ç«¯ (Bç«¯)
- **Vue 3.3** - å‰ç«¯æ¡†æ¶
- **TypeScript** - ç±»å‹æ”¯æŒ
- **Element Plus 2.4** - UIç»„ä»¶åº“
- **ECharts 5.4** - å›¾è¡¨åº“
- **Pinia** - çŠ¶æ€ç®¡ç†
- **Vue Router 4** - è·¯ç”±
- **Axios** - HTTPå®¢æˆ·ç«¯
- **Vite 5** - æ„å»ºå·¥å…·
- **SCSS** - æ ·å¼é¢„å¤„ç†

### å®¢æˆ·ç«¯å‰ç«¯ (Cç«¯)
- **Vue 3.3** - å‰ç«¯æ¡†æ¶
- **TypeScript** - ç±»å‹æ”¯æŒ
- **TailwindCSS 3.3** - åŸå­åŒ–CSSæ¡†æ¶
- **Pinia** - çŠ¶æ€ç®¡ç†
- **Vue Router 4** - è·¯ç”±
- **Axios** - HTTPå®¢æˆ·ç«¯
- **Vite 5** - æ„å»ºå·¥å…·

### éƒ¨ç½²
- **Docker & Docker Compose** - å®¹å™¨åŒ–éƒ¨ç½²
- **Nginx** - åå‘ä»£ç†ã€é™æ€èµ„æºæœåŠ¡

## é¡¹ç›®ç»“æ„
```
phms/
â”œâ”€â”€ backend/                    # Spring Boot åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ src/main/java/com/phms/
â”‚   â”‚   â”œâ”€â”€ common/             # å…¬å…±æ¨¡å— (Result, Exception, Constants)
â”‚   â”‚   â”œâ”€â”€ config/             # é…ç½®ç±» (MyBatis-Plus, Sa-Token, Knife4j)
â”‚   â”‚   â”œâ”€â”€ aspect/             # AOPåˆ‡é¢ (æ“ä½œæ—¥å¿—)
â”‚   â”‚   â”œâ”€â”€ entity/             # å®ä½“ç±»
â”‚   â”‚   â”œâ”€â”€ mapper/             # MyBatis Mapperæ¥å£
â”‚   â”‚   â”œâ”€â”€ service/            # æœåŠ¡å±‚
â”‚   â”‚   â”‚   â””â”€â”€ impl/           # æœåŠ¡å®ç°
â”‚   â”‚   â”œâ”€â”€ controller/         # æ§åˆ¶å™¨å±‚
â”‚   â”‚   â”œâ”€â”€ dto/                # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”‚   â””â”€â”€ vo/                 # è§†å›¾å¯¹è±¡
â”‚   â”œâ”€â”€ src/main/resources/
â”‚   â”‚   â””â”€â”€ application.yml     # åº”ç”¨é…ç½®
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ pom.xml
â”œâ”€â”€ frontend-admin/             # ç®¡ç†ç«¯ Vue3 + Element Plus
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/                # APIæ¥å£æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ layout/             # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ router/             # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ stores/             # PiniaçŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ styles/             # å…¨å±€æ ·å¼
â”‚   â”‚   â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ views/              # é¡µé¢ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ login/          # ç™»å½•é¡µ
â”‚   â”‚       â”œâ”€â”€ dashboard/      # ä»ªè¡¨ç›˜
â”‚   â”‚       â”œâ”€â”€ hotel/          # é—¨åº—ç®¡ç†
â”‚   â”‚       â”œâ”€â”€ staff/          # å‘˜å·¥ç®¡ç†
â”‚   â”‚       â”œâ”€â”€ room/           # æˆ¿é—´ç®¡ç†
â”‚   â”‚       â”œâ”€â”€ order/          # è®¢å•ç®¡ç†
â”‚   â”‚       â”œâ”€â”€ care/           # ç…§æ–™æ—¥å¿—
â”‚   â”‚       â”œâ”€â”€ log/            # ç³»ç»Ÿæ—¥å¿—
â”‚   â”‚       â””â”€â”€ error/          # é”™è¯¯é¡µé¢
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”œâ”€â”€ nginx.conf
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ frontend-user/              # å®¢æˆ·ç«¯ Vue3 + TailwindCSS
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ layout/             # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ router/             # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ stores/             # PiniaçŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ styles/             # TailwindCSSæ ·å¼
â”‚   â”‚   â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ views/              # é¡µé¢ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ home/           # é¦–é¡µ
â”‚   â”‚       â”œâ”€â”€ login/          # ç™»å½•é¡µ
â”‚   â”‚       â”œâ”€â”€ room/           # æˆ¿é—´åˆ—è¡¨/è¯¦æƒ…
â”‚   â”‚       â”œâ”€â”€ booking/        # é¢„è®¢é¡µé¢
â”‚   â”‚       â”œâ”€â”€ pet/            # å® ç‰©ç®¡ç†
â”‚   â”‚       â”œâ”€â”€ order/          # è®¢å•ç®¡ç†
â”‚   â”‚       â”œâ”€â”€ profile/        # ä¸ªäººä¸­å¿ƒ
â”‚   â”‚       â””â”€â”€ error/          # é”™è¯¯é¡µé¢
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”œâ”€â”€ nginx.conf
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ mysql/
â”‚   â””â”€â”€ init.sql                # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”œâ”€â”€ docker-compose.yml          # Dockerç¼–æ’æ–‡ä»¶
â””â”€â”€ README.md                   # é¡¹ç›®æ–‡æ¡£
```

## åŠŸèƒ½æ¨¡å—

### è§’è‰²æƒé™
| è§’è‰² | role_type | æƒé™è¯´æ˜ |
|------|-----------|----------|
| å¹³å°ç®¡ç†å‘˜ | 9 | ç®¡ç†æ‰€æœ‰é—¨åº—ã€å‘˜å·¥ã€å…¨å±€é…ç½® |
| åº—é•¿ | 2 | ç®¡ç†æœ¬åº—å‘˜å·¥ã€æˆ¿é—´ã€è®¢å•ã€ç…§æ–™æ—¥å¿— |
| å‘˜å·¥ | 1 | è®¢å•å¤„ç†ã€ç…§æ–™æ—¥å¿—è®°å½• |
| Cç«¯ç”¨æˆ· | - | é¢„è®¢ã€å® ç‰©ç®¡ç†ã€è®¢å•æŸ¥çœ‹ |

### å®¢æˆ·ç«¯åŠŸèƒ½ (Cç«¯)
- ğŸ” æ‰‹æœºå·+éªŒè¯ç ç™»å½•/æ³¨å†Œ
- ğŸ• å® ç‰©ä¿¡æ¯ç®¡ç† (å¢åˆ æ”¹æŸ¥)
- ğŸ¨ æµè§ˆæˆ¿å‹ä¸å¯ç”¨æˆ¿é—´
- ğŸ“… åœ¨çº¿é¢„è®¢æˆ¿é—´
- ğŸ“‹ è®¢å•ç®¡ç†ä¸çŠ¶æ€è·Ÿè¸ª
- ğŸ“ æŸ¥çœ‹ç…§æ–™æ—¥å¿—

### ç®¡ç†ç«¯åŠŸèƒ½ (Bç«¯)
- ğŸ“Š æ•°æ®ä»ªè¡¨ç›˜ (ä»Šæ—¥é¢„è®¢ã€åœ¨ä½å® ç‰©ã€æˆ¿æ€ç»Ÿè®¡ã€EChartså›¾è¡¨)
- ğŸ¢ é—¨åº—ç®¡ç† (å¤šé—¨åº—æ”¯æŒ)
- ğŸ‘¥ å‘˜å·¥ç®¡ç† (è§’è‰²åˆ†é…ã€å¯†ç é‡ç½®)
- ğŸ  æˆ¿é—´ç®¡ç† (æˆ¿å‹ã€ä»·æ ¼ã€çŠ¶æ€)
- ğŸ“ è®¢å•ç®¡ç† (ç¡®è®¤ã€å…¥ä½ã€é€€æˆ¿ã€å–æ¶ˆ)
- ğŸ“· ç…§æ–™æ—¥å¿—è®°å½• (å–‚é£Ÿã€æ¸…æ´ã€é›å¼¯ã€å¥åº·æ£€æŸ¥)
- ğŸ“œ ç³»ç»Ÿæ—¥å¿— (ç™»å½•æ—¥å¿—ã€æ“ä½œæ—¥å¿—)

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Docker 20.10+
- Docker Compose 2.0+
- (æœ¬åœ°å¼€å‘) JDK 17+, Node.js 18+, Maven 3.8+

### Dockerä¸€é”®éƒ¨ç½²

1. å…‹éš†é¡¹ç›®
```bash
git clone <repository-url>
cd phms
```

2. å¯åŠ¨æ‰€æœ‰æœåŠ¡
```bash
docker-compose up -d
```

3. ç­‰å¾…æœåŠ¡å¯åŠ¨å®Œæˆåè®¿é—®
- å®¢æˆ·ç«¯Cç«¯: http://localhost:5174
- ç®¡ç†ç«¯Bç«¯: http://localhost:5173
- åç«¯API: http://localhost:8080
- APIæ–‡æ¡£: http://localhost:8080/doc.html

### é»˜è®¤æµ‹è¯•è´¦å·

**Bç«¯ç®¡ç†å‘˜è´¦å·:**
| é‚®ç®± | å¯†ç  | è§’è‰² |
|------|------|------|
| admin@phms.com | 123456 | å¹³å°ç®¡ç†å‘˜ |
| manager1@phms.com | 123456 | åº—é•¿ |
| staff1@phms.com | 123456 | å‘˜å·¥ |

**Cç«¯ç”¨æˆ·è´¦å·:**
| æ‰‹æœºå· | éªŒè¯ç  |
|--------|--------|
| 13800138001 | 123456 (å¼€å‘ç¯å¢ƒ) |

## æœ¬åœ°å¼€å‘

### åç«¯å¼€å‘
```bash
cd backend
# ç¡®ä¿MySQLå’ŒRediså·²å¯åŠ¨
mvn spring-boot:run
# è®¿é—® http://localhost:8080/doc.html æŸ¥çœ‹APIæ–‡æ¡£
```

### ç®¡ç†ç«¯Bç«¯å¼€å‘
```bash
cd frontend-admin
npm install
npm run dev
# è®¿é—® http://localhost:5173
```

### å®¢æˆ·ç«¯Cç«¯å¼€å‘
```bash
cd frontend-user
npm install
npm run dev
# è®¿é—® http://localhost:5174
```

## APIæ¥å£è¯´æ˜

### è®¤è¯ç›¸å…³
| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| /api/auth/user/send-code | POST | å‘é€çŸ­ä¿¡éªŒè¯ç  |
| /api/auth/user/login | POST | Cç«¯ç”¨æˆ·ç™»å½• |
| /api/auth/staff/login | POST | Bç«¯å‘˜å·¥ç™»å½• |
| /api/auth/logout | POST | ç™»å‡º |

### Bç«¯ç®¡ç†æ¥å£
| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| /api/dashboard | GET | ä»ªè¡¨ç›˜ç»Ÿè®¡æ•°æ® |
| /api/hotels | GET/POST/PUT/DELETE | é—¨åº—CRUD |
| /api/staff | GET/POST/PUT/DELETE | å‘˜å·¥CRUD |
| /api/rooms | GET/POST/PUT/DELETE | æˆ¿é—´CRUD |
| /api/rooms/{id}/status | PUT | æ›´æ–°æˆ¿é—´çŠ¶æ€ |
| /api/orders | GET | è®¢å•åˆ—è¡¨ |
| /api/orders/{id}/confirm | POST | ç¡®è®¤è®¢å• |
| /api/orders/{id}/check-in | POST | åŠç†å…¥ä½ |
| /api/orders/{id}/check-out | POST | åŠç†é€€æˆ¿ |
| /api/care-logs | GET/POST/PUT/DELETE | ç…§æ–™æ—¥å¿—CRUD |
| /api/logs/login | GET | ç™»å½•æ—¥å¿— |
| /api/logs/operation | GET | æ“ä½œæ—¥å¿— |

### Cç«¯ç”¨æˆ·æ¥å£
| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| /api/rooms/available | GET | å¯ç”¨æˆ¿é—´åˆ—è¡¨ |
| /api/rooms/{id} | GET | æˆ¿é—´è¯¦æƒ… |
| /api/pets/my | GET | æˆ‘çš„å® ç‰©åˆ—è¡¨ |
| /api/pets | POST | æ·»åŠ å® ç‰© |
| /api/pets/{id} | PUT/DELETE | æ›´æ–°/åˆ é™¤å® ç‰© |
| /api/orders | POST | åˆ›å»ºè®¢å• |
| /api/orders/my | GET | æˆ‘çš„è®¢å•åˆ—è¡¨ |
| /api/orders/{id} | GET | è®¢å•è¯¦æƒ… |
| /api/orders/{id}/cancel | POST | å–æ¶ˆè®¢å• |

## æ•°æ®åº“è®¾è®¡

### ç³»ç»Ÿè¡¨ (sys_*)
| è¡¨å | è¯´æ˜ |
|------|------|
| sys_hotels | é—¨åº—è¡¨ |
| sys_staff | å‘˜å·¥è¡¨ (Bç«¯ç”¨æˆ·) |
| sys_users | ç”¨æˆ·è¡¨ (Cç«¯ç”¨æˆ·) |
| sys_verification_codes | éªŒè¯ç è¡¨ |
| sys_login_logs | ç™»å½•æ—¥å¿—è¡¨ |
| sys_operation_logs | æ“ä½œæ—¥å¿—è¡¨ |

### ä¸šåŠ¡è¡¨ (biz_*)
| è¡¨å | è¯´æ˜ | å¤šç§Ÿæˆ· |
|------|------|--------|
| biz_rooms | æˆ¿é—´è¡¨ | âœ“ (æŒ‰hotel_idéš”ç¦») |
| biz_pets | å® ç‰©è¡¨ | âœ— |
| biz_orders | è®¢å•è¡¨ | âœ“ (æŒ‰hotel_idéš”ç¦») |
| biz_care_logs | ç…§æ–™æ—¥å¿—è¡¨ | âœ“ (æŒ‰hotel_idéš”ç¦») |

### å¤šç§Ÿæˆ·è¯´æ˜
ç³»ç»Ÿä½¿ç”¨ MyBatis-Plus TenantLineHandler å®ç°å¤šç§Ÿæˆ·æ•°æ®éš”ç¦»ï¼š
- åº—é•¿/å‘˜å·¥ç™»å½•åè‡ªåŠ¨æŒ‰ hotel_id è¿‡æ»¤æ•°æ®
- å¹³å°ç®¡ç†å‘˜(role_type=9)ä¸å—ç§Ÿæˆ·è¿‡æ»¤é™åˆ¶

## ç‰¹æ€§è¯´æ˜

### è®¤è¯æˆæƒ
- ä½¿ç”¨ Sa-Token æ¡†æ¶
- Token å­˜å‚¨äº Redisï¼Œæœ‰æ•ˆæœŸ 24 å°æ—¶
- Bç«¯é‚®ç®±+å¯†ç ç™»å½•ï¼ŒCç«¯æ‰‹æœºå·+éªŒè¯ç ç™»å½•
- åŸºäºè§’è‰²çš„æƒé™æ§åˆ¶

### æ“ä½œæ—¥å¿—
- ä½¿ç”¨ AOP åˆ‡é¢è‡ªåŠ¨è®°å½•
- è‡ªå®šä¹‰ @OperateLog æ³¨è§£
- è®°å½•è¯·æ±‚å‚æ•°ã€å“åº”ç»“æœã€æ‰§è¡Œæ—¶é—´
- æ•æ„Ÿå­—æ®µ(å¯†ç )è‡ªåŠ¨è„±æ•

### é€»è¾‘åˆ é™¤
- æ‰€æœ‰ä¸šåŠ¡è¡¨ä½¿ç”¨ is_deleted å­—æ®µ
- MyBatis-Plus è‡ªåŠ¨å¤„ç†é€»è¾‘åˆ é™¤

## License
MIT

---
å® ç‰©é…’åº—ç®¡ç†ç³»ç»Ÿ (PHMS) - æ¯•ä¸šè®¾è®¡é¡¹ç›®
