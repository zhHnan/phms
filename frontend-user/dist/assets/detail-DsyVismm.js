import{d as Me,r as v,B as je,l as ze,C as J,x as Ve,c as l,a as s,i as Ee,e as m,f as oe,w as Fe,T as We,F as w,m as S,A as Q,t as u,k as Be,g as me,n as O,y as fe,D as Le,E as Pe,G as qe,j as Ue,p as T,v as Ye,o,H as He,_ as Ge}from"./index-ClhVCDrs.js";const Je={class:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Qe={key:0,class:"text-center py-20"},Ke={key:1,class:"flex flex-col"},Xe={class:"card w-full mb-8"},Ze={class:"grid grid-cols-1 md:grid-cols-2 gap-8"},et={class:"relative"},tt={key:0,class:"relative"},st={class:"h-64 md:h-96 bg-gray-200 rounded-lg overflow-hidden relative"},at=["src","alt"],ot=["src"],lt={key:2,class:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2 z-10"},nt=["onClick"],rt={key:3,class:"mt-4 grid grid-cols-5 gap-2"},ct=["onClick"],it=["src","alt"],ut={key:1,class:"h-64 md:h-96 bg-gray-200 rounded-lg flex items-center justify-center text-8xl"},dt={key:2,class:"mt-8 pt-8 border-t"},vt={class:"prose text-gray-600"},mt={class:"min-w-0"},ft={class:"mb-4"},gt={class:"text-3xl font-bold text-gray-900"},ht={key:0,class:"text-gray-500 mb-1"},pt={key:1,class:"text-gray-500 mb-4"},yt={class:"text-gray-500 mb-4"},xt={class:"flex flex-col gap-2 mb-4"},bt={class:"flex items-center gap-2 text-sm text-gray-700"},_t={class:"text-yellow-500 text-base"},wt={class:"text-gray-500"},kt={class:"text-gray-400 text-xs"},Nt={class:"flex items-center gap-2 text-sm text-gray-700"},It={class:"text-yellow-500 text-base"},St={class:"text-gray-500"},Ct={class:"text-gray-400 text-xs"},Dt={class:"text-3xl font-bold text-primary-600 mb-6"},$t={class:"mb-6 p-4 bg-gray-50 rounded-lg"},Rt={key:0,class:"mt-3 flex items-center gap-2"},Ot={key:0,class:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium"},Tt={key:1,class:"px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm font-medium"},At={class:"space-y-4 mb-8"},Mt={class:"flex items-center text-gray-600"},jt={key:0,class:"flex items-start text-gray-600"},zt={class:"flex flex-wrap gap-2"},Vt={class:"w-full"},Et={key:0,class:"card w-full flex flex-col mb-6"},Ft={class:"relative"},Wt={class:"flex flex-col gap-2 h-full"},Bt={class:"w-full h-24 rounded bg-gray-100 overflow-hidden flex-shrink-0"},Lt=["src","alt"],Pt={key:1,class:"w-full h-full flex items-center justify-center text-gray-400 text-2xl"},qt={class:"flex-1 min-w-0"},Ut={class:"font-medium text-sm truncate"},Yt={class:"text-xs text-gray-500"},Ht={class:"text-xs text-gray-400 mt-1"},Gt={key:0,class:"text-xs text-gray-500 line-clamp-2"},Jt={key:0,class:"text-center mt-3 text-sm text-gray-500"},Qt={class:"flex justify-center"},Kt={key:1,disabled:"",class:"px-12 py-3 text-lg bg-gray-200 text-gray-500 rounded-lg cursor-not-allowed"},Xt={key:2,disabled:"",class:"px-12 py-3 text-lg bg-gray-200 text-gray-500 rounded-lg cursor-not-allowed"},Zt={key:0,class:"mt-8"},es={class:"card"},ts={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ss={class:"flex items-start justify-between mb-2"},as={class:"flex items-center gap-1"},os={class:"text-yellow-500"},ls={class:"text-gray-600 text-sm font-medium"},ns={class:"text-xs text-gray-400"},rs={class:"text-sm font-medium text-gray-700 mb-2"},cs={key:0,class:"text-sm text-gray-600"},is={key:1,class:"text-sm text-gray-400 italic"},us={key:0,class:"fixed inset-0 z-50 flex items-end justify-end pointer-events-none"},ds={class:"relative w-full sm:w-[420px] h-[520px] sm:h-[600px] bg-white rounded-t-2xl sm:rounded-2xl shadow-2xl m-0 sm:m-6 pointer-events-auto flex flex-col overflow-hidden"},vs={class:"flex items-center justify-between px-4 py-3 border-b"},ms={key:0,class:"text-xs text-gray-500"},fs={key:1,class:"text-xs text-gray-500"},gs={key:0,class:"text-center text-gray-400 text-sm mt-10"},hs={class:"mt-1 text-[11px] opacity-70 text-right"},ps={class:"px-4 py-3 border-t bg-white"},ys={class:"flex items-center gap-2"},xs=["disabled"],bs=["disabled"],_s={key:0,class:"text-xs text-gray-400 mt-2"},ws=Me({__name:"detail",setup(ks){const K=Ye(),ge=Ue(),n=v(null),X=v(!0),g=v(0),C=v([]),E=v({}),F=v(null),A=v(!1),x=()=>{const t=F.value;if(!t){A.value=!1;return}const e=t.scrollWidth,r=t.clientWidth,c=e-r>2;A.value=c},le=()=>x();let M=null,j=null,W=null;const Z=v([]),z=v(0),B=v(0),ee=v(0),ne=v(0),te=v(!1),L=v(null),P=v(""),k=v(""),q=v([]),f=v(null),b=v(!1),U=v(null),Y=v([]),D=v(""),$=v(""),he=v(""),V=v(!1),N=v(!1),H=t=>{const e=t.getFullYear(),r=`${t.getMonth()+1}`.padStart(2,"0"),c=`${t.getDate()}`.padStart(2,"0");return`${e}-${r}-${c}`},pe=()=>{const t=new Date,e=new Date(t),r=new Date(e);r.setDate(e.getDate()+3),he.value=H(t),D.value=H(e),$.value=H(r),Y.value=[D.value,$.value]},ye=t=>{const e=new Date;return e.setHours(0,0,0,0),t<e},xe=t=>{if(!t||t.length!==2){N.value=!1;return}let[e,r]=t;if(e===r){const c=new Date(e);c.setDate(c.getDate()+1),r=H(c),Y.value=[e,r]}D.value=e,$.value=r,re()},re=async()=>{if(!D.value||!$.value||!n.value){N.value=!1;return}try{const t=await T.get("/room/check-availability",{params:{roomId:n.value.id,checkInDate:D.value,checkOutDate:$.value}});V.value=t.data,N.value=!0}catch(t){console.error("æ£€æŸ¥å¯ç”¨æ€§å¤±è´¥:",t),V.value=!1,N.value=!0}},be=()=>{if(n.value){const t=Object.entries(E.value).map(([e,r])=>({productId:Number(e),quantity:Number(r)})).filter(e=>e.quantity>0);ge.push({path:`/booking/${n.value.id}`,query:{checkInDate:D.value,checkOutDate:$.value,products:t.length?encodeURIComponent(JSON.stringify(t)):void 0}})}},_e=t=>{const e=new Date(t),r=`${e.getHours()}`.padStart(2,"0"),c=`${e.getMinutes()}`.padStart(2,"0");return`${r}:${c}`},we=async()=>{await J(),U.value&&(U.value.scrollTop=U.value.scrollHeight)},_=(t,e,r)=>{q.value.push({from:t,text:e,ts:r??Date.now()}),we()},ke=t=>{var R;const e=localStorage.getItem("user_token")||"",r=window.location.origin.replace(/^http/,"ws"),c=K.params.id?Number(K.params.id):"",a=(R=n.value)!=null&&R.hotelId?Number(n.value.hotelId):"",i=`${r}/api/ws/chat?staffId=${t}${c?`&roomId=${c}`:""}${a?`&hotelId=${a}`:""}${e?`&token=${encodeURIComponent(e)}`:""}`;console.log("æ­£åœ¨è¿æ¥ WebSocket:",i),console.log("Token:",e?"æœ‰":"æ— "),console.log("StaffId:",t),console.log("RoomId:",c),f.value=new WebSocket(i),f.value.onopen=()=>{console.log("WebSocket è¿æ¥æˆåŠŸ"),b.value=!0},f.value.onmessage=p=>{console.log("æ”¶åˆ°æ¶ˆæ¯:",p.data);try{const d=JSON.parse(p.data);if((d==null?void 0:d.type)==="STAFF_CONNECTED"){d.staffName&&(P.value=d.staffName);return}if((d==null?void 0:d.type)==="HISTORY"){d.staffName&&(P.value=d.staffName),(Array.isArray(d.messages)?d.messages:[]).forEach(y=>{if(!y)return;const ae=y.sender==="user"?"me":"staff",Ae=y.ts?Number(y.ts):void 0;_(ae,String(y.text||y.message||""),Ae)});return}if((d==null?void 0:d.type)==="GREETING"){d.staffName&&(P.value=d.staffName);const I=d.text||"æ‚¨å¥½ï¼Œæˆ‘æ˜¯å®¢æœï¼Œå¾ˆé«˜å…´ä¸ºæ‚¨æœåŠ¡ã€‚";_("staff",String(I));return}const G=(d==null?void 0:d.text)||(d==null?void 0:d.message)||p.data;_("staff",String(G))}catch{_("staff",String(p.data))}},f.value.onclose=p=>{console.log("WebSocket è¿æ¥å…³é—­:",p.code,p.reason),b.value=!1},f.value.onerror=p=>{console.error("WebSocket é”™è¯¯:",p),b.value=!1,_("staff","è¿æ¥å‡ºé”™ï¼Œè¯·åˆ·æ–°é‡è¯•")}},Ne=async()=>{var t,e,r;try{console.log("æ­£åœ¨è·å–åœ¨çº¿å®¢æœ...");const c=(t=n.value)==null?void 0:t.hotelId,a=await T.get("/support/online-staff",{params:{hotelId:c}});console.log("å®¢æœAPIå“åº”:",a);const i=((e=a.data)==null?void 0:e.id)||((r=a.data)==null?void 0:r.staffId);i?(console.log("åŒ¹é…åˆ°å®¢æœID:",i),L.value=Number(i),ke(Number(i))):(console.warn("æ²¡æœ‰åœ¨çº¿å®¢æœ"),_("staff","å½“å‰æš‚æ— åœ¨çº¿å®¢æœï¼Œè¯·ç¨åå†è¯•ã€‚"))}catch(c){console.error("è·å–åœ¨çº¿å®¢æœå¤±è´¥:",c),console.error("é”™è¯¯è¯¦æƒ…:",c.message,c.response),_("staff","è·å–åœ¨çº¿å®¢æœå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•ã€‚")}},Ie=()=>{te.value=!0,q.value=[],L.value=null,b.value=!1,Ne()},ce=()=>{te.value=!1,k.value="",f.value&&(f.value.close(),f.value=null)},ie=()=>{const t=k.value.trim();!t||!f.value||f.value.readyState!==WebSocket.OPEN||(f.value.send(JSON.stringify({text:t})),_("me",t),k.value="")},Se=t=>{const e=t.toLowerCase();return e.includes("çŒ«")||e.includes("cat")?"ğŸ±":e.includes("ç‹—")||e.includes("dog")||e.includes("çŠ¬")?"ğŸ•":"ğŸ "},ue=t=>{if(!t)return[];try{return JSON.parse(t)}catch{return[]}},h=t=>{if(!t)return[];try{return JSON.parse(t)}catch{return[]}},de=t=>{if(!t)return[];try{return JSON.parse(t)}catch{return[]}},Ce=()=>{if(!n.value)return;const t=h(n.value.images);t.length>1&&(g.value=(g.value-1+t.length)%t.length,console.log("åˆ‡æ¢åˆ°ä¸Šä¸€å¼ :",g.value))},De=()=>{if(!n.value)return;const t=h(n.value.images);t.length>1&&(g.value=(g.value+1)%t.length,console.log("åˆ‡æ¢åˆ°ä¸‹ä¸€å¼ :",g.value))},ve=t=>{const e=F.value;if(!e)return;const r=240,c=t==="left"?-r:r;try{e.scrollBy({left:c,behavior:"smooth"})}catch{const a=e.scrollLeft,i=a+c,R=220,p=performance.now(),d=I=>1-(1-I)*(1-I),G=I=>{const y=Math.min(1,(I-p)/R),ae=d(y);e.scrollLeft=a+(i-a)*ae,y<1&&requestAnimationFrame(G)};requestAnimationFrame(G)}},$e=async()=>{var t,e;X.value=!0;try{const r=await T.get(`/room/${K.params.id}`);if(n.value=r.data,(t=n.value)!=null&&t.hotelId&&(await Re(n.value.hotelId,n.value.id),await Oe(n.value.hotelId)),await re(),(e=n.value)!=null&&e.hotelId){const c=await T.get("/product/user/list",{params:{hotelId:n.value.hotelId}});C.value=c.data||[];const a={};C.value.forEach(i=>{a[i.id]=0}),E.value=a,await J(),x()}}catch(r){console.error("è·å–æˆ¿é—´è¯¦æƒ…å¤±è´¥:",r)}finally{X.value=!1}},se=t=>{if(!t||t<=0)return"â˜†â˜†â˜†â˜†â˜†";const e=Math.min(5,Math.max(0,Math.round(t)));return"â˜…â˜…â˜…â˜…â˜…".slice(0,e)+"â˜†â˜†â˜†â˜†â˜†".slice(0,5-e)},Re=async(t,e)=>{try{const c=(await T.get(`/hotel-review/summary/${t}`)).data||{};if(ee.value=Number(c.hotelAvgScore||0),ne.value=Number(c.hotelReviewCount||0),Array.isArray(c.rooms)){const a=c.rooms.find(i=>Number(i.roomId)===Number(e));a?(z.value=Number(a.avgScore||0),B.value=Number(a.reviewCount||0)):(z.value=0,B.value=0)}else z.value=0,B.value=0}catch(r){console.error("è·å–è¯„åˆ†æ±‡æ€»å¤±è´¥:",r)}},Oe=async t=>{try{const e=await T.get(`/hotel-review/list/${t}`,{params:{limit:10}});Z.value=e.data||[]}catch(e){console.error("è·å–è¯„è®ºåˆ—è¡¨å¤±è´¥:",e)}},Te=t=>{if(!t)return"";const e=new Date(t),r=e.getFullYear(),c=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${r}-${c}-${a}`};return je(C,async()=>{await J(),x()}),ze(()=>{pe(),$e(),window.addEventListener("resize",le),J(()=>x()),setTimeout(()=>x(),200);const t=()=>{const e=F.value;if(!e){W=window.setTimeout(t,200);return}try{"ResizeObserver"in window&&(M=new ResizeObserver(()=>x()),M.observe(e))}catch{}try{j=new MutationObserver(()=>x()),j.observe(e,{childList:!0,subtree:!0})}catch{}x()};t()}),Ve(()=>{if(f.value&&f.value.close(),window.removeEventListener("resize",le),M){try{M.disconnect()}catch{}M=null}if(j){try{j.disconnect()}catch{}j=null}W&&(clearTimeout(W),W=null)}),(t,e)=>{const r=me("el-date-picker"),c=me("el-input-number");return o(),l(w,null,[s("div",Je,[s("button",{onClick:e[0]||(e[0]=a=>t.$router.back()),class:"flex items-center text-gray-600 hover:text-primary-600 mb-6"},[...e[5]||(e[5]=[s("span",null,"â† è¿”å›",-1)])]),X.value?(o(),l("div",Qe,[...e[6]||(e[6]=[s("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-primary-600 border-t-transparent"},null,-1)])])):n.value?(o(),l("div",Ke,[s("div",Xe,[s("div",Ze,[s("div",et,[h(n.value.images).length>0?(o(),l("div",tt,[s("div",st,[oe(We,{name:"fade",mode:"out-in"},{default:Fe(()=>[(o(),l("img",{key:g.value,src:h(n.value.images)[g.value],alt:n.value.typeName,class:"w-full h-full object-cover"},null,8,at))]),_:1}),(o(!0),l(w,null,S(h(n.value.images),(a,i)=>fe((o(),l("img",{key:`preload-${i}`,src:a,alt:"é¢„åŠ è½½"},null,8,ot)),[[He,!1]])),128))]),h(n.value.images).length>1?(o(),l("button",{key:0,onClick:Q(Ce,["stop"]),class:"absolute left-2 top-1/2 -translate-y-1/2 bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-70 hover:scale-110 transition-all z-10"}," â† ")):m("",!0),h(n.value.images).length>1?(o(),l("button",{key:1,onClick:Q(De,["stop"]),class:"absolute right-2 top-1/2 -translate-y-1/2 bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-70 hover:scale-110 transition-all z-10"}," â†’ ")):m("",!0),h(n.value.images).length>1?(o(),l("div",lt,[(o(!0),l(w,null,S(h(n.value.images),(a,i)=>(o(),l("button",{key:i,onClick:Q(R=>g.value=Number(i),["stop"]),class:O(["w-2 h-2 rounded-full transition-all duration-300",Number(i)===g.value?"bg-white w-6":"bg-white bg-opacity-50 hover:bg-opacity-80"])},null,10,nt))),128))])):m("",!0),h(n.value.images).length>1?(o(),l("div",rt,[(o(!0),l(w,null,S(h(n.value.images).slice(0,5),(a,i)=>(o(),l("button",{key:i,onClick:Q(R=>g.value=Number(i),["stop"]),class:O(["aspect-square rounded overflow-hidden border-2 transition-all duration-200",Number(i)===g.value?"border-primary-600 scale-105":"border-transparent hover:border-gray-300"])},[s("img",{src:a,alt:`å›¾ç‰‡${Number(i)+1}`,class:"w-full h-full object-cover",loading:"lazy"},null,8,it)],10,ct))),128))])):m("",!0)])):(o(),l("div",ut,u(Se(n.value.typeName)),1)),n.value.description?(o(),l("div",dt,[e[7]||(e[7]=s("h2",{class:"text-xl font-semibold mb-4"},"æˆ¿é—´ä»‹ç»",-1)),s("div",vt,[s("p",null,u(n.value.description),1)])])):m("",!0)]),s("div",mt,[s("div",ft,[s("h1",gt,u(n.value.typeNameDisplay||n.value.typeName),1)]),n.value.hotelName?(o(),l("p",ht,u(n.value.hotelName),1)):m("",!0),n.value.hotelAddress?(o(),l("p",pt,u(n.value.hotelAddress),1)):m("",!0),s("p",yt,"æˆ¿é—´å·: "+u(n.value.roomNo),1),s("div",xt,[s("div",bt,[e[8]||(e[8]=s("span",{class:"font-medium"},"æˆ¿é—´è¯„åˆ†:",-1)),s("span",_t,u(se(z.value)),1),s("span",wt,u(z.value.toFixed(1))+"/5",1),s("span",kt,"("+u(B.value)+" äººè¯„ä»·)",1)]),s("div",Nt,[e[9]||(e[9]=s("span",{class:"font-medium"},"é…’åº—è¯„åˆ†:",-1)),s("span",It,u(se(ee.value)),1),s("span",St,u(ee.value.toFixed(1))+"/5",1),s("span",Ct,"("+u(ne.value)+" äººè¯„ä»·)",1)])]),s("div",Dt,[Be(" Â¥"+u(n.value.pricePerNight)+" ",1),e[10]||(e[10]=s("span",{class:"text-lg text-gray-500"},"/å¤©",-1))]),s("div",$t,[e[11]||(e[11]=s("h3",{class:"font-semibold mb-3"},"é€‰æ‹©å…¥ä½æ—¥æœŸ",-1)),oe(r,{modelValue:Y.value,"onUpdate:modelValue":e[1]||(e[1]=a=>Y.value=a),type:"daterange","range-separator":"è‡³","start-placeholder":"å…¥ä½æ—¥æœŸ","end-placeholder":"é€€æˆ¿æ—¥æœŸ","value-format":"YYYY-MM-DD","disabled-date":ye,onChange:xe,class:"w-full room-date-picker"},null,8,["modelValue"]),N.value?(o(),l("div",Rt,[V.value?(o(),l("span",Ot," âœ“ è¯¥æ—¶é—´æ®µå¯é¢„è®¢ ")):(o(),l("span",Tt," âœ— è¯¥æ—¶é—´æ®µä¸å¯é¢„è®¢ "))])):m("",!0)]),s("div",At,[s("div",Mt,[e[12]||(e[12]=s("span",{class:"w-24"},"å®¹é‡:",-1)),s("span",null,u(n.value.maxPetNum)+"åªå® ç‰©",1)]),ue(n.value.features).length>0?(o(),l("div",jt,[e[13]||(e[13]=s("span",{class:"w-24 flex-shrink-0"},"è®¾æ–½:",-1)),s("div",zt,[(o(!0),l(w,null,S(ue(n.value.features),(a,i)=>(o(),l("span",{key:i,class:"px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-sm"},u(a),1))),128))])])):m("",!0)])])]),s("div",Vt,[C.value.length?(o(),l("div",Et,[e[14]||(e[14]=s("h2",{class:"text-xl font-semibold mb-4"},"é€‰è´­",-1)),s("div",Ft,[s("div",{class:O(["product-scroll flex gap-4 overflow-x-auto pb-4",C.value.length<=3?"justify-center":""]),ref_key:"productScroll",ref:F},[(o(!0),l(w,null,S(C.value,a=>(o(),l("div",{key:a.id,class:"p-4 border rounded-lg flex-shrink-0 w-48"},[s("div",Wt,[s("div",Bt,[de(a.images).length?(o(),l("img",{key:0,src:de(a.images)[0],alt:a.name,class:"w-full h-full object-cover"},null,8,Lt)):(o(),l("div",Pt,"ğŸ“¦"))]),s("div",qt,[s("p",Ut,u(a.name),1),s("p",Yt,"Â¥"+u(a.price)+" / ä»¶",1),s("p",Ht,"åº“å­˜ï¼š"+u(a.stock),1)]),oe(c,{modelValue:E.value[a.id],"onUpdate:modelValue":i=>E.value[a.id]=i,min:0,max:a.stock,size:"small",class:"w-full"},null,8,["modelValue","onUpdate:modelValue","max"]),a.description?(o(),l("p",Gt,u(a.description),1)):m("",!0)])]))),128))],2),A.value?(o(),l("button",{key:0,class:"scroll-btn left","aria-label":"å‘å·¦å¾®ç§»",onClick:e[2]||(e[2]=a=>ve("left"))}," â† ")):m("",!0),A.value?(o(),l("button",{key:1,class:"scroll-btn right","aria-label":"å‘å³å¾®ç§»",onClick:e[3]||(e[3]=a=>ve("right"))}," â†’ ")):m("",!0)]),A.value?(o(),l("div",Jt," â† å·¦å³æ»‘åŠ¨æŸ¥çœ‹æ›´å¤šå•†å“ â†’ ")):m("",!0)])):m("",!0),s("div",Qt,[V.value&&N.value?(o(),l("button",{key:0,onClick:be,class:"btn-primary px-12 py-3 text-lg"}," ç«‹å³é¢„è®¢ ")):N.value&&!V.value?(o(),l("button",Kt," è¯¥æ—¶é—´æ®µä¸å¯é¢„è®¢ ")):(o(),l("button",Xt," è¯·é€‰æ‹©å…¥ä½æ—¥æœŸ "))])])]),Z.value.length?(o(),l("div",Zt,[s("div",es,[e[15]||(e[15]=s("h2",{class:"text-xl font-semibold mb-6"},"ç”¨æˆ·è¯„ä»·",-1)),s("div",ts,[(o(!0),l(w,null,S(Z.value,a=>(o(),l("div",{key:a.orderId,class:"p-4 bg-gray-50 rounded-lg hover:shadow-md transition-shadow"},[s("div",ss,[s("div",as,[s("span",os,u(se(a.score)),1),s("span",ls,u(a.score)+".0åˆ†",1)]),s("span",ns,u(Te(a.createdAt)),1)]),s("p",rs,u(a.userName||"åŒ¿åç”¨æˆ·"),1),a.content?(o(),l("p",cs,u(a.content),1)):(o(),l("p",is,"æœªç•™è¯„ä»·å†…å®¹"))]))),128))])])])):m("",!0)])):m("",!0)]),s("button",{class:"fixed bottom-8 right-6 bg-primary-600 text-white px-4 py-3 rounded-full shadow-lg hover:bg-primary-700 transition-colors z-50 flex items-center gap-2",onClick:Ie,title:"è”ç³»å®¢æœ"},[...e[16]||(e[16]=[s("span",{class:"text-lg"},"ğŸ’¬",-1),s("span",{class:"font-medium"},"è”ç³»å®¢æœ",-1)])]),(o(),Ee(qe,{to:"body"},[te.value?(o(),l("div",us,[s("div",{class:"absolute inset-0 bg-black/30 pointer-events-auto",onClick:ce}),s("div",ds,[s("div",vs,[s("div",null,[e[17]||(e[17]=s("p",{class:"text-base font-semibold"},"åœ¨çº¿å®¢æœ",-1)),L.value?(o(),l("p",ms,"æ­£åœ¨è¿æ¥å®¢æœ "+u(P.value||"ID "+L.value),1)):(o(),l("p",fs,"åŒ¹é…åœ¨çº¿å®¢æœä¸­..."))]),s("button",{class:"text-gray-400 hover:text-gray-600",onClick:ce},"âœ•")]),s("div",{class:"flex-1 bg-gray-50 px-4 py-3 space-y-3 overflow-y-auto",ref_key:"chatBody",ref:U},[q.value.length===0?(o(),l("div",gs,"æ­£åœ¨ä¸ºæ‚¨æ¥å…¥å®¢æœ... ")):m("",!0),(o(!0),l(w,null,S(q.value,(a,i)=>(o(),l("div",{key:i,class:O(["flex",a.from==="me"?"justify-end":"justify-start"])},[s("div",{class:O(["max-w-[70%] px-3 py-2 rounded-2xl text-sm",a.from==="me"?"bg-primary-600 text-white rounded-br-sm":"bg-white border rounded-bl-sm"])},[s("div",null,u(a.text),1),s("div",hs,u(_e(a.ts)),1)],2)],2))),128))],512),s("div",ps,[s("div",ys,[fe(s("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>k.value=a),onKeyup:Pe(ie,["enter"]),type:"text",placeholder:"è¯·è¾“å…¥è¦å’¨è¯¢çš„é—®é¢˜",class:"flex-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:outline-none",disabled:!b.value},null,40,xs),[[Le,k.value]]),s("button",{class:O(["px-4 py-2 rounded-lg text-white",b.value&&k.value.trim()?"bg-primary-600 hover:bg-primary-700":"bg-gray-300 cursor-not-allowed"]),onClick:ie,disabled:!b.value||!k.value.trim()}," å‘é€ ",10,bs)]),b.value?m("",!0):(o(),l("p",_s,"æ­£åœ¨è¿æ¥å®¢æœï¼Œè¯·ç¨å€™..."))])])])):m("",!0)]))],64)}}}),Is=Ge(ws,[["__scopeId","data-v-4b9981ca"]]);export{Is as default};
