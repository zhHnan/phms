import{d as _,u as k,r as o,c as S,a as e,A as q,y as p,D as m,t as x,v as B,j as D,o as U}from"./index-ClhVCDrs.js";import{a as v,s as b,b as f}from"./message-CTPluzoh.js";const V={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},j={class:"max-w-md w-full space-y-8"},E={class:"space-y-4"},I={class:"flex space-x-4"},M=["disabled"],R=["disabled"],T=_({__name:"index",setup(A){const y=D(),g=B(),c=k(),s=o(""),n=o(""),r=o(!1),u=o(!1),l=o(0);let i=null;const w=async()=>{if(!s.value||s.value.length!==11){v("è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·");return}u.value=!0;try{await c.sendCode(s.value),b("éªŒè¯ç å·²å‘é€"),h()}catch(a){f(a.message||"å‘é€éªŒè¯ç å¤±è´¥")}finally{u.value=!1}},h=()=>{l.value=60,i=window.setInterval(()=>{l.value--,l.value<=0&&i&&clearInterval(i)},1e3)},C=async()=>{if(!s.value||!n.value){v("è¯·å¡«å†™å®Œæ•´ä¿¡æ¯");return}r.value=!0;try{await c.login(s.value,n.value);const a=g.query.redirect||"/";b("ç™»å½•æˆåŠŸ"),y.push(a)}catch(a){f(a.message||"ç™»å½•å¤±è´¥")}finally{r.value=!1}};return(a,t)=>(U(),S("div",V,[e("div",j,[t[5]||(t[5]=e("div",{class:"text-center"},[e("span",{class:"text-6xl"},"ğŸ¾"),e("h2",{class:"mt-6 text-3xl font-bold text-gray-900"}," æ¬¢è¿å›æ¥ "),e("p",{class:"mt-2 text-sm text-gray-600"}," ä½¿ç”¨æ‰‹æœºå·ç™»å½•å® ç‰©é…’åº— ")],-1)),e("form",{class:"mt-8 space-y-6",onSubmit:q(C,["prevent"])},[e("div",E,[e("div",null,[t[2]||(t[2]=e("label",{for:"phone",class:"block text-sm font-medium text-gray-700 mb-1"},"æ‰‹æœºå·",-1)),p(e("input",{id:"phone","onUpdate:modelValue":t[0]||(t[0]=d=>s.value=d),type:"tel",required:"",maxlength:"11",class:"input-field",placeholder:"è¯·è¾“å…¥æ‰‹æœºå·"},null,512),[[m,s.value]])]),e("div",null,[t[3]||(t[3]=e("label",{for:"code",class:"block text-sm font-medium text-gray-700 mb-1"},"éªŒè¯ç ",-1)),e("div",I,[p(e("input",{id:"code","onUpdate:modelValue":t[1]||(t[1]=d=>n.value=d),type:"text",required:"",maxlength:"6",class:"input-field flex-1",placeholder:"è¯·è¾“å…¥éªŒè¯ç "},null,512),[[m,n.value]]),e("button",{type:"button",onClick:w,disabled:l.value>0||u.value,class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap transition-colors"},x(l.value>0?`${l.value}s`:"è·å–éªŒè¯ç "),9,M)])])]),e("div",null,[e("button",{type:"submit",disabled:r.value,class:"w-full btn-primary py-3 text-lg disabled:opacity-50"},x(r.value?"ç™»å½•ä¸­...":"ç™»å½• / æ³¨å†Œ"),9,R)]),t[4]||(t[4]=e("p",{class:"text-center text-sm text-gray-500"}," æœªæ³¨å†Œçš„æ‰‹æœºå·å°†è‡ªåŠ¨åˆ›å»ºè´¦å· ",-1))],32),t[6]||(t[6]=e("div",{class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},[e("h4",{class:"text-sm font-medium text-blue-800 mb-2"},"æµ‹è¯•è´¦å·"),e("p",{class:"text-xs text-blue-600"},"æ‰‹æœºå·: 13800138001"),e("p",{class:"text-xs text-blue-600"},"éªŒè¯ç : 123456 (å¼€å‘ç¯å¢ƒ)")],-1))])]))}});export{T as default};
